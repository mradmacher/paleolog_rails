<%= render_title @well.region.name %>
<%= render 'navigation' %>

<% actions = [] %>
<% if @well.manageable_by?( current_user ) %>
	<% actions << ['Add sample', new_well_sample_path( @well )] <<
		['Edit well', edit_well_path( @well )] %>
	<% if @well.samples.empty? %>
		<% actions << ['Delete well', well_path( @well ), :confirm => 'Are you sure', :method => :delete] %>
	<% end %>
<% end %>
<%= render_actions actions %>
<% content_for :breadcrumb do %>
  <%= link_to bracketize(@well.region.name), region_path(@well.region) %> -
  <%= link_to bracketize(@well.name), well_path(@well) %>
<% end %>
<%= render_heading "Well" %>
<dl class="fields">
	<dt>Name</dt>
	<dd><%= @well.name %></dd>
</dl>
<table>
  <tr>
    <th>Samples</th>
    <% @countings.each do |counting| %>
      <th><%= counting.name %></th>
    <% end %>
  </tr>
  <% @samples.each do |sample| -%>
    <tr>
			<td><%= link_to sample.name, sample_path(sample) %></td>
      <% @countings.each do |counting| %>
        <td align="center"><%= link_to(@counted_samples.include?([counting.id, sample.id]) ? 'C' : 'X', counting_sample_occurrences_path(counting, sample)) %></td>
      <% end %>
    </tr>
  <% end %>
</table>
